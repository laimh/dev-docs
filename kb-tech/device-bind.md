# WiseCRM365 设备绑定

## 概述
每个用户可以绑定多个PC设备、移动设备。启用设备绑定后，用户只能在已绑定的设备上登录。使用之前请将相关字段布局到用户视图。

## 目录
* [用户模块字段](#用户模块字段)
* [使用移动设备绑定](#使用移动设备绑定)
* [Chrome浏览器绑定MAC地址](#Chrome浏览器绑定MAC地址)
  * [下载插件](#下载插件)
  * [写入注册表](#写入注册表)
  * [安装扩展程序](#安装扩展程序)
  * [测试登录](#测试登录)
  * [如果测试登录失败](#如果测试登录失败)
* [IE浏览器绑定MAC地址](#IE浏览器绑定MAC地址)
* [查看电脑MAC方法](#查看电脑MAC方法)



## 用户模块字段
<table>
<thead>
	<tr>
		<th>字段</th>
		<th>字段说明</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>移动设备绑定</td>
		<td>启用即开启移动设备绑定功能，并将用户尝试登录的设备的设备标志记录到“移动设备标志”字段。</td>
	</tr>
  <tr>
		<td>移动设备标志</td>
		<td>辅助字段，用于获取移动设备标志。用户在一台新的移动设备登录时，系统会将此设备的设备标志更新到此字段（Android系统获取的是手机序列号，可以在手机上查看，Android10之后无法获取序列号， 只能获取手机MAC地址，手机切换到不同网络时会发生变化；iOS系统获取的是特殊标志，无法在手机上查看。）</td>
	</tr>
  <tr>
		<td>移动设备标志验证</td>
		<td>验证移动设备，设备标志输入到此字段才算成功绑定设备。可以把“移动设备标志”字段值粘贴到此字段， Android系统的手机也可以手动输入设备序列号。</td>
	</tr>
  <tr>
		<td>PC设备绑定</td>
		<td>启用即开启PC设备绑定功能。</td>
	</tr>
  <tr>
		<td>MAC地址</td>
		<td>将指定PC的MAC地址输入到此字段， 用户就只能在此PC上登录。</td>
	</tr>
</tbody>
</table>

## 使用移动设备绑定
管理员将“移动设备绑定”值改为 启用。然后用户在手机上尝试登录，此时会登录失败，提示需要管理员绑定设备。此时管理员再次打开用户编辑页，会看到“移动设备标志”字段已经记录了刚刚的手机设备号，把这个设备号粘贴到“移动设备标志验证”字段，保存后用户即可正常登录。

## Chrome浏览器绑定MAC地址
### 下载插件 
例如用户A需要设备绑定， 则在用户A的电脑下载Chrome插件压缩包，选择合适的目录解压，解压后会看到两个文件夹：extensions文件夹和host文件夹，然后不要随意更改两个目录的路径。[点击下载插件](https://wbs-qncdn.wisecrm.cn/uploader/20191022/95923948209747536.zip)
### 写入注册表
解压下载的压缩包，打开host目录，双击install_host.bat文件，双击之后会弹出一个一闪即逝的命令行窗口，然后再安装浏览器扩展。
### 安装扩展程序
Chrome地址栏中输入 chrome://extensions/ 打开扩展程序页面， 打开开发者模式，点击加载已解压的扩展程序，选择extensions文件夹，此时扩展程序已安装完成。
### 测试登录
管理员将用户A的“PC设备绑定”值改为启用，同时把用户A电脑的MAC地址输入到“MAC地址”字段， 再让用户A登录，如果登录成功，则代表安装插件成功。
### 如果测试登录失败
如果提示“未识别到当前电脑的MAC地址”，需要检查当前登录地址的域名是否包含365.wisecrm.com，如果不包含，需要修改配置文件。修改方法：复制当前登录地址，编辑extensions文件夹下的manifest.json文件，在第41行中插入一行，粘贴刚刚复制的登录地址，注意使用英文的逗号和引号。 保存文件后，需要在浏览器中重新加载插件，然后刷新登录页重新登录。

## IE浏览器绑定MAC地址
打开Internet选项，选择“安全”，打开“自定义级别”，找到“对未标记为可安全执行脚本的ActiveX控件初始化并执行脚本” 选择启用， 点击确定，刷新页面后测试登录。

## 查看电脑MAC方法
以windows10系统为例， win+R 打开“运行”，输入cmd打开命令行工具，输入命令:getmac。 复制其中一个地址即可。

